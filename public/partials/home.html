<div class="jumbotron">

    <div ng-if="!sessionUser.isAuthenticated">
        <h2 translate>Wellcome to your absence manager</h2>
        <p translate>Please log into the application to see your account informations</p>
    </div>

    <div ng-if="sessionUser.isAccount">
        <h2 translate>My account</h2>


        <div class="col-md-2">

        </div>




        <div class="col-md-5">
            <h3 class="text-center donutcharttitle">{{renewalChart.availableDays|number}}
                <span translate translate-n="renewalChart.availableDays" translate-plural="days">day</span>
            </h3>

            <nvd3-pie-chart
                data="renewalChart.days"
                id="daysChart"
                width="400"
                height="400"
                x="renewalChart.xFunction()"
                y="renewalChart.yFunction()"
                color="renewalChart.colorFunction()"
                showLabels="true"
                noData="'No ongoing renewal with rights'"
                tooltip="true"
                donut="true"
                showLabels="true"
                >
                <svg height="250"></svg>
            </nvd3-pie-chart>

        </div>

        <div class="col-md-5">

            <h3 class="text-center donutcharttitle">{{renewalChart.availableHours|number}}
                <span translate translate-n="renewalChart.availableHours" translate-plural="hours">hour</span>
            </h3>

            <nvd3-pie-chart
                data="renewalChart.hours"
                id="hoursChart"
                width="400"
                height="400"
                x="renewalChart.xFunction()"
                y="renewalChart.yFunction()"
                color="renewalChart.colorFunction()"
                showLabels="true"
                noData="'No ongoing renewal with rights'"
                tooltip="true"
                donut="true"
                showLabels="true"
                >
                <svg></svg>
            </nvd3-pie-chart>

        </div>

    </div>

    <div ng-if="sessionUser.isAdmin">
        <h2 translate>Administrator</h2>

        Get list of last actions
    </div>

    <div ng-if="sessionUser.isManager">
        <h2 translate>Manager</h2>

        Get managed services
    </div>

</div>



<div class="inga-department">

    <h2>{{sessionUser.department.name}}</h2>

    <table class="table">
        <thead>
            <tr>
                <td></td>
                <th class="text-center" ng-repeat="col in collaborators[0].days" ng-class="{'hidden-xs': $index>7 }">
                    {{col.date|date:'d'}}
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="collaborator in collaborators">
                <th>
                    <img class="img-rounded" ng-src="{{collaborator.image}}" title="{{collaborator.lastname}} {{collaborator.firstname}}" height="35" />
                    <i class="fa fa-user" ng-if="!collaborator.image" title="{{collaborator.lastname}} {{collaborator.firstname}}"></i>
                    <span class="hidden-sm hidden-xs">{{collaborator.lastname}} {{collaborator.firstname}}</span>
                </th>

                <td class="text-center"
                    ng-repeat="col in collaborator.days"
                    ng-class="{'danger': !col.free, 'success': col.free,'hidden-xs': $index>7 }"
                    >
                    <i class="text-muted fa fa-times nonworkingday" ng-if="col.nonworkingday" data-title="{{col.nonworkingday.summary}}" bs-tooltip></i>
                    <i ng-repeat="event in col.events"
                       class="text-muted fa"
                       ng-class="{ 'fa-calendar-check-o': event.status!='TENTATIVE', 'fa-calendar-times-o': event.status=='TENTATIVE' }"
                       data-title="{{event.dtstart|date:'shortTime'}} - {{event.dtend|date:'shortTime'}}" bs-tooltip></i>
                </td>
            </tr>
        </tbody>
    </table>
</div>
