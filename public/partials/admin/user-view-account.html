<div class="row">
    
    <p><span translate>Current rights collection:</span> {{user.roles.account.currentCollection.name}}</p>
    
    <div class="alert alert-danger" role="alert" ng-if="!user.roles.account.currentCollection">
        <span translate>This user has no ongoing right collection, check the vacations collections planning to fix it</span>
    </div>
    
    <p><span translate>Current workschedule calendar:</span> {{user.roles.account.currentScheduleCalendar.name}}</p>
    
    <div class="alert alert-danger" role="alert" ng-if="!user.roles.account.currentScheduleCalendar">
        <span translate>This user has no ongoing workschedule calendar, check the workschedule calendar planning to fix it</span>
    </div>
    
    
    <ul>
        <li ng-repeat="event in testEvents">
            {{event.dtstart|date}} - {{event.dtend|date}}
        </li>
    </ul>
    
    
    <p><span translate>Seniority date:</span> 
        {{user.roles.account.seniority|date}} 
        (<span translate translate-n="seniority_years" translate-plural="{{$count}} years seniority">One year seniority</span>)
    </p>
    
    <p><i class="fa fa-envelope text-info"></i> <span translate>Notifications options:</span>
        <ul>
            <li ng-if="user.roles.account.notify.approvals">
                <span translate>Notify on approvals</span>
            </li>
            <li ng-if="!user.roles.account.notify.approvals">
                <span translate>Do not notify on approvals</span>
            </li>

            <li ng-if="user.roles.account.notify.allocations">
                <span translate>Notify on new rights allocations</span>
            </li>
            <li ng-if="!user.roles.account.notify.allocations">
                <span translate>Do not notify on new rights allocations</span>
            </li>
        </ul>
    </p>
</div>

<div class="row">
    <h3  class="col-xs-10" translate>Vacations rights</h3>

    <table class="table">
        <thead>
        <tr>
            <th>Right name</th>
            <th class="hidden-xs">Type</th>
            <th>Remaining</th>
            <th class="hidden-xs hidden-sm">Used</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="accountRight in accountRights">
            <td>
                <a ng-href="#/admin/users/{{user._id}}/rights">
                    {{accountRight.right.name}}
                </a>
            </td>
            <td class="hidden-xs">{{accountRight.right.type.name}}</td>
            <td>{{accountRight.currentperiod.remaining}}</td>
            <td class="hidden-xs hidden-sm">{{accountRight.currentperiod.used}}</td>
        </tr>
        </tbody>

    </table>
    
    <div class="alert alert-danger" role="alert" ng-if="!accountRights.length">
        <span translate>This user has no configured vacation rights for the current period</span>
    </div>
</div>


<div class="row">
    <h3  class="col-xs-10" translate>Vacations collections planning</h3>
    <div class="col-xs-2 text-right">
        <br />
        <a ng-href="#/admin/users/{{user._id}}/account-collections" class="btn btn-info btn-xs hidden-print" role="button"><i class="fa fa-edit"></i> <span class="hidden-xs" translate>Edit</span></a> 
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>Collection name</th>
            <th class="col-sm-3">From</th>
            <th class="col-sm-3">To</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="accountCollection in accountCollections">
            <td>
                <a ng-href="#/admin/collections/{{accountCollection.rightCollection._id}}">
                    {{accountCollection.rightCollection.name}}
                </a>
            </td>
            <td>{{accountCollection.from|date}}</td>
            <td>{{accountCollection.to|date}}</td>
        </tr>
        </tbody>

    </table>
</div>

<div class="row">
    <h3  class="col-xs-10" translate>Workschedule calendars planning</h3>
    <div class="col-xs-2 text-right">
        <br />
        <a ng-href="#/admin/users/{{user._id}}/account-schedulecalendars" class="btn btn-info btn-xs hidden-print" role="button"><i class="fa fa-edit"></i> <span class="hidden-xs" translate>Edit</span></a> 
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>Calendar name</th>
            <th class="col-sm-3">From</th>
            <th class="col-sm-3">To</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="accountScheduleCalendar in accountScheduleCalendars">
            <td>
                <a ng-href="#/admin/calendars/{{accountScheduleCalendar.calendar._id}}">
                    {{accountScheduleCalendar.calendar.name}}
                </a>
            </td>
            <td>{{accountScheduleCalendar.from|date}}</td>
            <td>{{accountScheduleCalendar.to|date}}</td>
        </tr>
        </tbody>

    </table>

    <div class="alert alert-danger" role="alert" ng-if="!accountScheduleCalendars.length">
        <span>This user has no configured work schedule</span>
    </div>
</div>
