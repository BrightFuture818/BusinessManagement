<div class="row">
    
    <p><span translate>Current rights collection:</span> {{user.roles.account.currentCollection.name}}</p>
    
    <div class="alert alert-danger" role="alert" ng-if="!user.roles.account.currentCollection">
        <span translate>This user has no ongoing right collection, check the vacations collections planning to fix it</span>
    </div>
    
    <p><span translate>Current workschedule calendar:</span> {{user.roles.account.currentScheduleCalendar.name}}</p>
    
    <div class="alert alert-danger" role="alert" ng-if="!user.roles.account.currentScheduleCalendar">
        <span translate>This user has no ongoing workschedule calendar, check the workschedule calendar planning to fix it</span>
    </div>
    
    <p ng-if="user.roles.account.birth">
        <span translate>Birth date:</span>
        {{user.roles.account.birth|date}}
        (<span translate translate-n="age" translate-plural="{{$count}} years old">One year old</span>)
    </p>
    
    <p ng-if="user.roles.account.arrival">
        <span translate>Arrival date:</span>
        {{user.roles.account.arrival|date}}
    </p>
    
    <p ng-if="user.roles.account.seniority">
        <span translate>Seniority date:</span>
        {{user.roles.account.seniority|date}} 
        (<span translate translate-n="seniority_years" translate-plural="{{$count}} years seniority">One year seniority</span>)
    </p>
    
    <p><i class="fa fa-envelope text-info"></i> <span translate>Notifications options:</span>
        <ul>
            <li ng-if="user.roles.account.notify.approvals">
                <span translate>Notify on approvals</span>
            </li>
            <li ng-if="!user.roles.account.notify.approvals">
                <span translate>Do not notify on approvals</span>
            </li>

            <li ng-if="user.roles.account.notify.allocations">
                <span translate>Notify on new rights allocations</span>
            </li>
            <li ng-if="!user.roles.account.notify.allocations">
                <span translate>Do not notify on new rights allocations</span>
            </li>
        </ul>
    </p>
</div>

<div class="row">
    <h3  class="col-xs-10" translate>Vacations rights</h3>

    <table class="table">
        <thead>
        <tr>
            <th translate>Right name</th>
            <th translate>Available quantity</th>
            <th translate>Renewals with remaining quantity</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="beneficiary in beneficiaries">
            <td>
                <a ng-href="#/admin/beneficiaries/{{beneficiary._id}}?user={{user._id}}">
                    <i title="{{beneficiary.right.type.name}}" class="fa fa-asterisk" style="color:{{beneficiary.right.type.color}}"></i> {{beneficiary.right.name}}
                </a>
            </td>
            <td>{{beneficiary.available_quantity}} {{beneficiary.available_quantity_dispUnit}}</td>
            <td>{{beneficiary.renewals.length}}</td>
        </tr>
        </tbody>

    </table>
    
    <div class="alert alert-danger" role="alert" ng-if="!beneficiaries.length">
        <span translate>This user has no configured vacation rights for the current period</span>
    </div>
</div>


<div class="row">
    <h3  class="col-xs-10" translate>Vacations collections planning</h3>
    <div class="col-xs-2 text-right">
        <br />
        <a ng-href="#/admin/users/{{user._id}}/account-collections" class="btn btn-info btn-xs hidden-print" role="button"><i class="fa fa-edit"></i> <span class="hidden-xs" translate>Edit</span></a> 
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>Collection name</th>
            <th class="col-sm-3">From</th>
            <th class="col-sm-3">To</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="accountCollection in accountCollections">
            <td>
                <a ng-href="#/admin/collections/{{accountCollection.rightCollection._id}}">
                    {{accountCollection.rightCollection.name}}
                </a>
            </td>
            <td>{{accountCollection.from|date}}</td>
            <td>{{accountCollection.to|date}}</td>
        </tr>
        </tbody>

    </table>
</div>

<div class="row">
    <h3  class="col-xs-10" translate>Workschedule calendars planning</h3>
    <div class="col-xs-2 text-right">
        <br />
        <a ng-href="#/admin/users/{{user._id}}/account-schedulecalendars" class="btn btn-info btn-xs hidden-print" role="button"><i class="fa fa-edit"></i> <span class="hidden-xs" translate>Edit</span></a> 
    </div>

    <table class="table">
        <thead>
        <tr>
            <th translate>Calendar name</th>
            <th class="col-sm-3" translate>From</th>
            <th class="col-sm-3" translate>To</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="accountScheduleCalendar in accountScheduleCalendars">
            <td>
                <a ng-href="#/admin/calendars/{{accountScheduleCalendar.calendar._id}}">
                    {{accountScheduleCalendar.calendar.name}}
                </a>
            </td>
            <td>{{accountScheduleCalendar.from|date}}</td>
            <td>{{accountScheduleCalendar.to|date}}</td>
        </tr>
        </tbody>

    </table>

    <div class="alert alert-danger" role="alert" ng-if="!accountScheduleCalendars.length">
        <span>This user has no configured work schedule</span>
    </div>
</div>




<div class="row">
    <h3  class="col-xs-10" translate>Non-working days calendars planning</h3>
    <div class="col-xs-2 text-right">
        <br />
        <a ng-href="#/admin/users/{{user._id}}/account-nwdayscalendars" class="btn btn-info btn-xs hidden-print" role="button"><i class="fa fa-edit"></i> <span class="hidden-xs" translate>Edit</span></a>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th translate>Calendar name</th>
            <th class="col-sm-3" translate>From</th>
            <th class="col-sm-3" translate>To</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="accountNWDaysCalendar in accountNWDaysCalendars">
            <td>
                <a ng-href="#/admin/calendars/{{accountNWDaysCalendar.calendar._id}}">
                    {{accountNWDaysCalendar.calendar.name}}
                </a>
            </td>
            <td>{{accountNWDaysCalendar.from|date}}</td>
            <td>{{accountNWDaysCalendar.to|date}}</td>
        </tr>
        </tbody>

    </table>

    <div class="alert alert-danger" role="alert" ng-if="!accountNWDaysCalendars.length">
        <span>This user has no configured non-working days</span>
    </div>
</div>




<div class="row">
    <h3  class="col-xs-10" translate>Exceptional quantity modifications</h3>
    <div class="col-xs-2 text-right">
        <br />
        <a ng-href="#/admin/users/{{user._id}}/account-renewalquantity" class="btn btn-info btn-xs hidden-print" role="button"><i class="fa fa-edit"></i> <span class="hidden-xs" translate>Edit</span></a>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th translate>Right name</th>
            <th translate>Renewal</th>
            <th class="hidden-xs hidden-sm" translate>Default quantity</th>
            <th translate>User quantity</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="renewal in adjustedRenewals">
            <td>
                <i title="{{renewal.right.type.name}}" class="fa fa-asterisk" style="color:{{renewal.right.type.color}}"></i> {{renewal.right.name}}
            </td>
            <td>{{renewal.start|date}}<span class="hidden-xs"> <i class="fa fa-long-arrow-right text-primary"></i> {{renewal.finish|date}}</span></td>
            <td class="hidden-xs hidden-sm">{{renewal.defaultQuantity|number}} {{renewal.initial_quantity_dispUnit}}</td>
            <td>{{renewal.initial_quantity|number}} {{renewal.initial_quantity_dispUnit}}</td>
        </tr>
        </tbody>

    </table>

    <div class="alert alert-success" role="alert" ng-if="!adjustments">
        <span>This user has no configured specific quantity, rights are set by collection only</span>
    </div>
</div>


